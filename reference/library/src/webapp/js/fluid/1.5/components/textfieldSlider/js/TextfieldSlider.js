var fluid_1_5=fluid_1_5||{};!function($,fluid){"use strict";fluid.defaults("fluid.textfieldSlider",{gradeNames:["fluid.viewComponent","fluid.prefs.modelRelay","autoInit"],components:{textfield:{type:"fluid.textfieldSlider.textfield",container:"{textfieldSlider}.dom.textfield",options:{model:"{textfieldSlider}.model",range:"{textfieldSlider}.options.range",members:{applier:"{textfieldSlider}.applier"}}},slider:{type:"fluid.textfieldSlider.slider",container:"{textfieldSlider}.dom.slider",options:{model:"{textfieldSlider}.model",range:"{textfieldSlider}.options.range",members:{applier:"{textfieldSlider}.applier"},sliderOptions:"{textfieldSlider}.options.sliderOptions"}}},selectors:{textfield:".flc-textfieldSlider-field",slider:".flc-textfieldSlider-slider"},events:{modelChanged:null,afterRender:null},listeners:{modelChanged:"{that}.refreshView"},model:{value:null},range:{min:0,max:100},sliderOptions:{orientation:"horizontal",step:1},invokers:{refreshView:{funcName:"fluid.textfieldSlider.refreshView",args:["{that}"]}},finalInitFunction:"fluid.textfieldSlider.finalInit",renderOnInit:!0}),fluid.textfieldSlider.finalInit=function(that){that.applier.modelChanged.addListener("value",function(newModel){that.events.modelChanged.fire(newModel.value)}),that.options.renderOnInit&&that.refreshView()},fluid.textfieldSlider.refreshView=function(that){that.textfield.container.val(that.model.value),that.events.afterRender.fire(that)},fluid.defaults("fluid.textfieldSlider.textfield",{gradeNames:["fluid.viewComponent","autoInit"],listeners:{onCreate:{listener:"fluid.textfieldSlider.textfield.init",args:"{that}"}},range:{}}),fluid.textfieldSlider.validateValue=function(model,range,changeRequest){var oldValue=model.value,newValue=changeRequest.value;isNaN(parseInt(newValue,10))?changeRequest.value=oldValue:(newValue<range.min?newValue=range.min:newValue>range.max&&(newValue=range.max),changeRequest.value=Number(newValue))},fluid.textfieldSlider.textfield.init=function(that){that.applier.guards.addListener({path:"value",transactional:!0},function(model,changeRequest){fluid.textfieldSlider.validateValue(model,that.options.range,changeRequest)}),that.container.change(function(source){that.applier.requestChange("value",source.target.value)})},fluid.defaults("fluid.textfieldSlider.slider",{gradeNames:["fluid.viewComponent","autoInit"],selectors:{thumb:".ui-slider-handle"},events:{modelChanged:null},listeners:{onCreate:{listener:"fluid.textfieldSlider.slider.init",args:"{that}"}},range:{}});var initSliderAria=function(thumb,opts){var ariaDefaults={role:"slider","aria-valuenow":opts.value,"aria-valuemin":opts.min,"aria-valuemax":opts.max};thumb.attr(ariaDefaults)};fluid.textfieldSlider.slider.init=function(that){var sliderOptions=$.extend(!0,{},that.options.sliderOptions,that.model,that.options.range);that.slider=that.container.slider(sliderOptions),initSliderAria(that.locate("thumb"),sliderOptions),that.setSliderValue=function(value){that.slider.slider("value",value)},that.setSliderAria=function(value){that.locate("thumb").attr("aria-valuenow",value)},that.slider.bind("slide",function(e,ui){that.applier.requestChange("value",ui.value)}),that.applier.modelChanged.addListener("value",function(newModel){that.setSliderValue(newModel.value),that.setSliderAria(newModel.value),that.events.modelChanged.fire(newModel.value)})}}(jQuery,fluid_1_5);