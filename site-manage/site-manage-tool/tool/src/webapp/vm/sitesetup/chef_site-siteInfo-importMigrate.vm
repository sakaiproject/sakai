##<!-- $Header: /cvs/sakai2/legacy/tools/src/webapp/vm/sitesetup/chef_site-siteInfo-importMigrate.vm,v 1.0 2007/11/01 15:40:02 tnguyen.iupui.edu Exp $ -->
<div class="portletBody">
	#if($menu)#toolbar($menu)#end
	<h3>
		$tlang.getString("sitinfimp.replace.heading")
	</h3>
	<h4>$tlang.getString("sitinfimp.replace.subheading")</h4>
	#if ($alertMessage)
		<div class="sak-banner-error">$tlang.getString("sitinfimp.alert") $alertMessage</div>
	#end
	<form name="featuresForm" action="#toolForm("$action")" method="post">
		## import is possible when use has maintain rights on at least one site other than the current one
		#if (($!sites && $sites.size() > 1) || ($!templateSites && $templateSites.size() > 0) || ($!hiddenSites && $hiddenSites.size() > 0))
			<div class="sak-banner-info">
				$tlang.getFormattedMessage("sitinfimp.replace", $formattedText.escapeHtml($currentSite.getTitle()))
			</div>

			#if ($!templateSites && $templateSites.size() > 0)
				<div class="mb-4">
					<div class="fw-bold mb-2">$tlang.getString("sitinfimp.templatesites")</div>
					#foreach($templateSite in $templateSites)
						#if ($!currentSite && ($templateSite.Id != $!currentSite.Id))
							#set($templateDescription = $formattedText.stripHtmlFromText($!templateSite.description, true))
							<div class="py-2 px-2 rounded #if ($velocityCount % 2 == 0) bg-body-tertiary #end">
								<label class="d-flex align-items-start gap-2 mb-0 w-100">
									<input class="form-check-input mt-1" type="radio" name="importSites" #if ($!importSiteList.containsKey($!templateSite)) checked="checked" #end value="$templateSite.getId()"/>
									<span class="d-block w-100">
										<span class="fw-medium d-block">$formattedText.escapeHtml($templateSite.getTitle())</span>
										<span class="small text-body-secondary font-monospace d-block text-break">$tlang.getString("java.siteid") $formattedText.escapeHtml($templateSite.getId())</span>
										#if("$!templateDescription" != "")
											<span class="small text-muted d-block text-truncate" title="$formattedText.escapeHtml($templateDescription)">$formattedText.escapeHtml($templateDescription)</span>
										#end
									</span>
								</label>
							</div>
						#end
					#end
				</div>
			#end

				<div class="mb-4">
					<div class="fw-bold mb-2">$tlang.getString("sitinfimp.mysites")</div>

					#foreach($site in $sites)
						#if ($!currentSite && ($site.Id != $!currentSite.Id))
							#set($siteDescription = $formattedText.stripHtmlFromText($!site.description, true))
							<div class="py-2 px-2 rounded #if ($velocityCount % 2 == 0) bg-body-tertiary #end">
								<label class="d-flex align-items-start gap-2 mb-0 w-100">
									<input class="form-check-input mt-1" type="radio" name="importSites" #if ($!importSiteList.containsKey($!site)) checked="checked"#end value="$site.getId()"/>
									<span class="d-block w-100">
										<span class="fw-medium d-block">$formattedText.escapeHtml($site.getTitle())</span>
										<span class="small text-body-secondary font-monospace d-block text-break">$tlang.getString("java.siteid") $formattedText.escapeHtml($site.getId())</span>
										#if("$!siteDescription" != "")
											<span class="small text-muted d-block text-truncate" title="$formattedText.escapeHtml($siteDescription)">$formattedText.escapeHtml($siteDescription)</span>
										#end
									</span>
								</label>
							</div>
						#end
					#end
				</div>

			#if ($!hiddenSites && $hiddenSites.size() > 0)
				<div class="mb-4">
					<div class="accordion border rounded-3 p-2" id="hiddenSitesAccordion">
						<div class="accordion-item border-0">
							<h5 class="accordion-header" id="hiddenSitesHeading">
								<button class="accordion-button collapsed fw-bold p-0 bg-transparent shadow-none" type="button"
									data-bs-toggle="collapse" data-bs-target="#hiddenSitesCollapse"
									aria-expanded="false" aria-controls="hiddenSitesCollapse">
									$tlang.getString("sitinfimp.hiddensites")
								</button>
							</h5>
							<div id="hiddenSitesCollapse" class="accordion-collapse collapse"
								aria-labelledby="hiddenSitesHeading" data-bs-parent="#hiddenSitesAccordion">
								<div class="accordion-body pt-2 px-0 pb-0">
									#foreach($hiddenSite in $hiddenSites)
										#if ($!currentSite && ($hiddenSite.Id != $!currentSite.Id))
											#set($hiddenSiteDescription = $formattedText.stripHtmlFromText($!hiddenSite.description, true))
											<div class="py-2 px-2 rounded #if ($velocityCount % 2 == 0) bg-body-tertiary #end">
												<label class="d-flex align-items-start gap-2 mb-0 w-100">
													<input class="form-check-input mt-1" type="radio" name="importSites" #if ($!importSiteList.containsKey($!hiddenSite)) checked="checked" #end value="$hiddenSite.getId()"/>
													<span class="d-block w-100">
														<span class="fw-medium d-block">$formattedText.escapeHtml($hiddenSite.getTitle())</span>
														<span class="small text-body-secondary font-monospace d-block text-break">$tlang.getString("java.siteid") $formattedText.escapeHtml($hiddenSite.getId())</span>
														#if("$!hiddenSiteDescription" != "")
															<span class="small text-muted d-block text-truncate" title="$formattedText.escapeHtml($hiddenSiteDescription)">$formattedText.escapeHtml($hiddenSiteDescription)</span>
														#end
													</span>
												</label>
											</div>
										#end
									#end
								</div>
							</div>
						</div>
					</div>
				</div>
			#end

			<input type="hidden" name="back" value="58" />
			<input type="hidden" name="templateIndex" value="59" />
			<input type="hidden" name="continue" value="60" />
			<p class="act">
				<input type="submit" accesskey="s" class="active" name="eventSubmit_doContinue" value="$tlang.getString("sitinfimp.con")" onclick="SPNR.disableControlsAndSpin( this, null );" />
				<input type="submit" accesskey="b" name="eventSubmit_doBack" value="$tlang.getString('gen.back')" onclick="SPNR.disableControlsAndSpin( this, null );" />
				<input type="submit" accesskey="x" name="eventSubmit_doCancel" value="$tlang.getString("sitinfimp.can")" onclick="SPNR.disableControlsAndSpin( this, null );" />
			</p>
		#else
			## show "no site available warning"
			<p class="instruction">
				$tlang.getString("import.noOtherSite")
			</p>
			<p class="act">
				<input type="submit" accesskey="x" name="eventSubmit_doCancel" value="$tlang.getString("sitinfimp.can")" onclick="SPNR.disableControlsAndSpin( this, null );" />
			</p>
		#end
		<input type="hidden" name="sakai_csrf_token" value="$sakai_csrf_token" />
	</form>
</div>
