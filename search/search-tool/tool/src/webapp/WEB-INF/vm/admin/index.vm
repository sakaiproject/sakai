#header(false ${adminModel.title})
<script src="/library/js/spinner.js$!{portalCdnQuery}"></script>
<div class="portletBody">    		
    <ul class="navIntraTool actionToolBar">
        <!-- Home Link -->
        <li>
            <span>
                <a href="../index">${rlb.searchadmin_index_search}</a>
            </span>
        </li>
        <li>
            <span class="current">
                ${rlb.jsp_admin}
            </span>
        </li>
    </ul>
    
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                #if ( ${adminModel.enabled} )
                    <div class="card mt-3">
                        <div class="card-header">
                            <h3 class="card-title">${rlb.searchadmin_index_site_functions}</h3>
                        </div>
                        <div class="card-body">
                            <div class="btn-toolbar" role="toolbar">
                                #foreach( $option in ${adminModel.defaultOptions} )
                                    #if ($option.name != "${rlb.searchadmin_cmd_refreshsiteind}")
                                        <button class="btn btn-primary" onclick="SPNR.disableControlsAndSpin(this, null); setTimeout(() => location='${option.url}', 100);" ${option.attributes}>${option.name}</button>
                                    #end
                                #end
                            </div>
                        </div>
                    </div>
                    <div class="card mt-3">
                        <div class="card-header">
                            <h3 class="card-title">${rlb.searchadmin_index_functions}</h3>
                        </div>
                        <div class="card-body">
                            <div class="alert alert-info">
                                <h4><i class="fa fa-info-circle"></i> ${rlb.searchadmin_index_types_title}</h4>
                                <p><strong>${rlb.searchadmin_default_index_title}:</strong> ${rlb.searchadmin_default_index_description}</p>
                                <p><strong>${rlb.searchadmin_questions_index_title}:</strong> ${rlb.searchadmin_questions_index_description}</p>
                            </div>
                            <form method="GET">
                                <div class="form-group">
                                    <label for="indexbuildername">${rlb.searchadmin_select_index_type}</label>
                                    <div class="input-group">
                                        <select name="indexbuildername" id="indexbuildername" class="form-control me-1 rounded">
                                            #foreach( $iName in ${adminModel.indexBuilderNames} )
                                                <option value="${iName}">#if($iName == "default")${rlb.searchadmin_default_index_label}#elseif($iName == "questions")${rlb.searchadmin_questions_index_label}#{else}${iName}#end</option>
                                            #end
                                        </select>
                                        <div class="input-group-btn">
                                            #foreach( $option in ${adminModel.indexSpecificOptions} )
                                                #if ($option.name != "${rlb.searchadmin_cmd_refreshind}")
                                                    <button class="btn btn-primary" type="button" onclick="submitCommand(this, '${option.url}')">${option.name}</button>
                                                #end
                                            #end
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                #else
                    <div class="alert alert-warning">
                        <p>${rlb.jsp_search_off_msg}</p>
                    </div>
                #end
            </div>
        </div>
    </div>
</div>

<script>
function submitCommand(button, command) {
    SPNR.disableControlsAndSpin(button, null);
    setTimeout(() => {
        const form = button.closest('form') || document.querySelector('form');
        if (form) {
            const input = document.createElement('input');
            input.type = 'hidden';
            input.name = 'command';
            input.value = command;
            form.appendChild(input);
            form.submit();
        }
    }, 100);
}
</script>

#footer()
