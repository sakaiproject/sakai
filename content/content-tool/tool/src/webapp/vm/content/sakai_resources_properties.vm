## version: $Id$
<!-- sakai_resources_properties.vm, use with org.sakaiproject.tool.content.ResourcesAction.java -->
#set($DOT = ".")
<div class="portletBody">
	<h3>
		$tlang.getString("action.props") 
	</h3>
	
	#if ($alertMessage)<div class="alertMessage">$tlang.getString("label.alert") $validator.escapeHtml($alertMessage)</div>#end
	<p class="instruction">
		$tlang.getString("instr.props") $required
	</p>
	#set($i = "0")
	#set($model = $item)
	<form name="propertyForm" id="propertyForm" action="#toolLink("ResourcesAction" "doReviseProperties")" method="post">
		<input type="hidden" name="sakai_action" id="sakai_action" value="doReviseProperties" />
		<input type="hidden" name="user_action" id="user_action" value="save" />
		<div id="propertiesDiv${DOT}$i" style="display:block;">
			<p class="shorttext">
				<span class="reqStar">*</span>
				<label for="displayName${DOT}$i">
					$tlang.getString("title.name") 
				</label>
				<input type="text" size="40" id="displayName${DOT}$i" name="displayName${DOT}$i" value="$validator.escapeHtml("$!item.name")" />
			</p>
			#parse("/vm/resources/sakai_properties.vm")
			<hr class="itemSeparator" />
		</div>		
		
		
	
		#if (!$dropboxMode)
			#if (!$item.isFolder())
				#if ($notification)
					##<p class="shorttext">
					<p>
						<label for="notify${DOT}$i">
							$tlang.getString("noti.label")
						</label>	
						<select name="notify" id="notify${DOT}$i">
							<option value="r">$tlang.getString("noti.all")</option>
							<option value="o">$tlang.getString("noti.limited")</option>
							<option value="n" selected="selected">$tlang.getString("noti.none")</option>
						</select>
					</p>	
				#end
			#end
		#end
	
		<p class="act">
			<input type="button" class="active" id="finish_button" onclick="document.getElementById('user_action').value='save';submitform('propertyForm');" value="$tlang.getString("label.update")" accesskey="s" />
			<input type="button" id="cancel_button" onclick="javascript:document.getElementById('user_action').value='cancel';submitform('propertyForm');" value="$tlang.getString("label.cancel")" accesskey="x" />
		</p>
		
	</form>
</div>
#parse("/vm/resources/sakai_properties_scripts.vm")
<script type="text/javascript">
	var mimeCategories = new Array();
#set($count = 0)
#foreach($category in $contentTypeImageService.mimeCategories)
	mimeCategories[$count] = "$category";
#set($count = $count + 1)
#end
	var mimeSubtypes = new Array();
#foreach($category in $contentTypeImageService.MimeCategories)
	mimeSubtypes["$category"] = new Array();
#set($count = 0)
#foreach($subtype in $contentTypeImageService.getMimeSubtypes("$category"))
	mimeSubtypes["$category"][$count] = "$subtype";
#set($count = $count + 1)
#end
#end
</script>

