<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <ui:param name="poolId"
        value="#{empty questionpool.questionPoolId ? param.questionPoolId : questionpool.questionPoolId}" />
    <ui:param name="currentItems"
        value="#{empty questionpool.currentItemIdsString ? param.currentItemIdsString : questionpool.currentItemIdsString}" />

    <f:view>
        <h:head>
            <ui:fragment rendered="#{not empty requestScope['html.head']}">
                <h:outputText value="#{requestScope['html.head']}" escape="false" />
            </ui:fragment>
            <title>
                <h:outputText value="#{authorImportExport.export_pool}" />
            </title>
        </h:head>

        <h:body onload="#{empty requestScope['html.body.onload'] ? '' : requestScope['html.body.onload']}">
            <div class="tier1">
                <h:form id="exportQuestionPoolForm">
                    <h:inputHidden id="currentItemIdsString" value="#{currentItems}" />
                    <h:inputHidden id="questionPoolId" value="#{poolId}" />

                    <h3 class="insColor insBak">
                        <h:outputText value="#{authorImportExport.export_pool}" />
                    </h3>

                    <div class="validation">
                        <h:outputText value="#{authorImportExport.export_instructions}" escape="false" />
                    </div>

                    <h:panelGrid columns="2" rendered="false">
                        <h:outputText value="#{authorImportExport.im_ex_version_choose}" />
                        <h:selectOneRadio layout="lineDirection">
                            <f:selectItem itemLabel="#{authorImportExport.im_ex_version_12}" itemValue="1" />
                            <f:selectItem itemLabel="#{authorImportExport.im_ex_version_20}" itemValue="2" />
                        </h:selectOneRadio>
                    </h:panelGrid>

                    <p class="act">
                        <h:commandButton value="#{authorImportExport.export_action}" type="submit"
                            action="#{xml.getOutcome}" immediate="true">
                            <f:param name="questionPoolId" value="lastModifiedDate" />
                            <f:param name="currentItemIdsString" value="#{currentItems}" />
                            <f:actionListener
                                type="org.sakaiproject.tool.assessment.ui.listener.author.ExportPoolListener" />
                        </h:commandButton>

                        <h:commandButton value="#{commonMessages.cancel_action}"
                            action="#{questionpool.cancelPool}"
                            onclick="SPNR.disableControlsAndSpin(this, null);">
                            <f:actionListener
                                type="org.sakaiproject.tool.assessment.ui.listener.questionpool.CancelPoolListener" />
                            <f:attribute name="returnToParentPool" value="false" />
                        </h:commandButton>
                    </p>
                </h:form>
            </div>
        </h:body>
    </f:view>
</ui:composition>
