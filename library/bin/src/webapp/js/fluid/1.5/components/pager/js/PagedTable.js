var fluid_1_5=fluid_1_5||{};!function($,fluid){"use strict";fluid.registerNamespace("fluid.pagedTable"),fluid.defaults("fluid.pagedTable.rangeAnnotator",{gradeNames:["fluid.eventedComponent","autoInit"]}),fluid.pagedTable.rangeAnnotator.onRenderPageLinks=function(that,tree,newModel,pagerBar){function fetchValue(index){return index=that.permutation?that.permutation[index]:index,fluid.table.fetchValue(that.options.dataOffset,dataModel,index,columnDef.valuebinding,roots)}pagerBar.tooltip.close();var roots={},column=that.options.annotateColumnRange||(that.options.annotateSortedColumn?newModel.sortKey:null);if(column){var dataModel=that.options.dataModel,columnDefs=that.options.columnDefs,columnDef=fluid.table.findColumnDef(columnDefs,column),tModel={};fluid.model.copyModel(tModel,newModel);var tooltipInfo={};fluid.each(tree,function(cell){if("page-link:link"===cell.ID&&!cell.current){var page=cell.pageIndex,start=page*tModel.pageSize;tModel.pageIndex=page;var limit=fluid.pager.computePageLimit(tModel),iValue=fetchValue(start),lValue=fetchValue(limit-1);tooltipInfo[page]={first:iValue,last:lValue}}}),pagerBar.tooltipInfo=tooltipInfo}},fluid.pagedTable.directModelFilter=function(model,pagerModel,perm){for(var togo=[],limit=fluid.pager.computePageLimit(pagerModel),i=pagerModel.pageIndex*pagerModel.pageSize;limit>i;++i){var index=perm?perm[i]:i;togo[togo.length]={index:index,row:model[index]}}return togo},fluid.pagedTable.configureTooltip=function(pagedTable,pagerBar,renderedPageList){var idMap=renderedPageList.rendererOptions.idMap,idToContent={};fluid.each(pagerBar.tooltipInfo,function(value,index){idToContent[idMap["pageLink:"+index]]=fluid.stringTemplate(pagedTable.options.markup.rangeAnnotation,value)}),pagerBar.tooltip.applier.requestChange("idToContent",idToContent)},fluid.defaults("fluid.pagedTable",{gradeNames:["fluid.pager","fluid.table","autoInit"],distributeOptions:[{target:"{that renderedPageList}.options.listeners.afterRender",record:{funcName:"fluid.pagedTable.configureTooltip",args:["{pagedTable}","{pagerBar}","{arguments}.0"]}},{target:"{that renderedPageList}.options.listeners.onRenderPageLinks",record:{funcName:"fluid.pagedTable.rangeAnnotator.onRenderPageLinks",args:["{pagedTable}","{arguments}.0","{arguments}.1","{pagerBar}"]}},{target:"{that pagerBar}.options.components.tooltip",source:"{that}.options.tooltip"}],annotateSortedColumn:!1,annotateColumnRange:void 0,markup:{rangeAnnotation:"<b> %first </b><br/>&mdash;<br/><b> %last </b>"},tooltip:{type:"fluid.tooltip",container:"{that}.container",options:{}},invokers:{acquireDefaultRange:{funcName:"fluid.identity",args:"{that}.dataModel.length"}},modelFilter:fluid.pagedTable.directModelFilter,model:{pageSize:10}})}(jQuery,fluid_1_5);