var fluid_1_5=fluid_1_5||{};!function($,fluid){"use strict";fluid.registerNamespace("fluid.tooltip"),fluid.tooltip.computeContentFunc=function(that){that.contentFunc=that.options.contentFunc?that.options.contentFunc:that.modelToContentFunc()},fluid.tooltip.updateContentImpl=function(that){that.computeContentFunc(),that.initialised&&that.container.tooltip("option","content",that.contentFunc)},fluid.tooltip.updateContent=function(that,content){that.model.content!==content&&that.applier.requestChange("content",content)},fluid.tooltip.idSearchFunc=function(idToContentFunc){return function(){var target=this;if($.contains(target.ownerDocument,target)){var idToContent=idToContentFunc(),ancestor=fluid.findAncestor(target,function(element){return idToContent[element.id]});return ancestor?idToContent[ancestor.id]:null}return null}},fluid.tooltip.modelToContentFunc=function(that){var model=that.model;return model.idToContent?fluid.tooltip.idSearchFunc(function(){return that.model.idToContent}):model.content?function(){return model.content}:void 0},fluid.tooltip.makeOpenHandler=function(that){return function(event,tooltip){fluid.tooltip.closeAll(that);var originalTarget=fluid.resolveEventTarget(event),key=fluid.allocateSimpleId(originalTarget);that.openIdMap[key]=!0,that.initialised&&that.events.afterOpen.fire(that,originalTarget,tooltip.tooltip,event)}},fluid.tooltip.makeCloseHandler=function(that){return function(event,tooltip){if(that.initialised){var originalTarget=fluid.resolveEventTarget(event);delete that.openIdMap[originalTarget.id],that.events.afterClose.fire(that,originalTarget,tooltip.tooltip,event)}}},fluid.tooltip.closeAll=function(that){fluid.each(that.openIdMap,function(value,key){var target=fluid.byId(key);that.container.tooltip("close",{type:"close",currentTarget:target,target:target})}),fluid.clear(that.openIdMap)},fluid.tooltip.setup=function(that){fluid.tooltip.updateContentImpl(that);var directOptions={content:that.contentFunc,open:fluid.tooltip.makeOpenHandler(that),close:fluid.tooltip.makeCloseHandler(that)},fullOptions=$.extend(!0,directOptions,that.options.widgetOptions);that.container.tooltip(fullOptions),that.initialised=!0},fluid.tooltip.doDestroy=function(that){that.initialised&&(fluid.tooltip.closeAll(that),$.contains(document,that.container[0])&&that.container.tooltip("destroy"),that.initialised=!1)},fluid.defaults("fluid.tooltip",{gradeNames:["fluid.viewComponent","autoInit"],widgetOptions:{tooltipClass:"{that}.options.styles.tooltip",position:"{that}.options.position",items:"{that}.options.items",show:{duration:"{that}.options.duration",delay:"{that}.options.delay"},hide:{duration:"{that}.options.duration",delay:"{that}.options.delay"}},invokers:{open:{"this":"{that}.container",method:"tooltip",args:"open"},close:{funcName:"fluid.tooltip.closeAll",args:"{that}"},updateContent:{funcName:"fluid.tooltip.updateContent",args:["{that}","{arguments}.0"]},computeContentFunc:{funcName:"fluid.tooltip.computeContentFunc",args:["{that}"]},modelToContentFunc:{funcName:"fluid.tooltip.modelToContentFunc",args:"{that}"}},model:{content:"{that}.options.content"},members:{openIdMap:{}},styles:{tooltip:""},events:{afterOpen:null,afterClose:null},listeners:{onCreate:"fluid.tooltip.setup",onDestroy:"fluid.tooltip.doDestroy"},modelListeners:{"":{funcName:"fluid.tooltip.updateContentImpl",args:"{that}"}},position:{my:"left top",at:"left bottom",offset:"0 5"},items:"*",delay:300})}(jQuery,fluid_1_5);