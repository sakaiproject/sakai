.#{$namespace}sakai-lessonbuildertool {
	.navIntraTool {
		margin: 0 0 0 0;
		padding: 0 0 0 0;
		border-bottom: 0px none;
		li {
			span {
				a {
					border-bottom: 1px solid var(--tool-border-color);
					display: inline-block;
				}
			}
		}

		.nextprev {
			 line-height: 1em;
		}
	}
	.portletBody > * {
		position: inherit;
		top: 0;
	}
	.mainList {
		list-style: none;
		padding: 0 0 0 0;
	}

	.split {
		.mainList {
			@include display-flex;
			@include flex-wrap(wrap);
			.item {
				@include flex-grow(1);
				width: 50%;
				max-width: 50%;
				@media #{$phone} {
					width: 100%;
				}
			}
			.breaksection {
				display: none;
			}
		}
	}

	.#{$namespace}toolTitleNav {
		@media #{$phone} {
		       margin-top: 0px;
		       margin-bottom: 10px;
		       margin-right: 10px;
		       top: 14px;
        }
		.menuitem {
			  line-height: 1em;
		}
    }

	.#{$namespace}toolTitleNav__button_container {
		@media #{$phone} {
			margin-top: -25px;	
		}
	}

	.#{$namespace}hierarchy--separator {
		margin-left: 10px;
		margin-right: 10px;
	}
	
	.sectionHeader {
		border-radius: $button-radius $button-radius 0 0;

		@media #{$phone} {
		       clear: both;
		       top: 10px;
		}
	}
	.closedSectionHeader {
		border-radius: $button-radius;
	}
	
	/*
       Any changes shoud be checked to make sure they have enough
       contrast for accessiblity. These colors have been checked
       against the WebAIM Color Contrast Checker. I've tried to
       make them subjectively the same darkness.
    */
	/* default */
	.questionDiv .contentCol, .checklistDiv {
		background-color: var(--sakai-background-color-3);
	}
	input[type="submit"].question-submit,.linkCell .addStudentContent, input[type="submit"].setStudentZero {
		@include sakai_secondary_button();
		margin-top: $standard-space-4x;
	}
	.column .commentDiv, .column .studentContentTable, .column .forumSummaryHeaderDiv, .column .announcementsHeaderDiv, .column .fc-toolbar {
		background-color: var(--sakai-background-color-2);
	}

	.column a[href]:not(.usebutton) {
		color: var(--link-color);
	}
	//legacy gray
	.colgray, .colgray-trans {
		@include sakai-colorize(sakai-gray-20, sakai-gray-80);
		border: 1px solid var(--sakai-gray-25);
	}
	.colgray .commentDiv, .colgray .studentContentTable, .colgray .questionDiv .contentCol, .colgray .forumSummaryHeaderDiv, .colgray .announcementsHeaderDiv, .colgray-trans .commentDiv, .colgray-trans .studentContentTable, .colgray-trans .questionDiv .contentCol {
		background-color: var(--sakai-gray-30);
	}
	.colgray a[href], .colgray-trans a[href]{
		color: var(--sakai-gray-80);
	}
	//legacy red
	.colred, .colred-trans {
		@include sakai-colorize(sakai-red-20, sakai-red-80);
		border: 1px solid var(--sakai-red-25);
	}
	.colred .commentDiv, .colred .studentContentTable, .colred .questionDiv .contentCol, .colred .forumSummaryHeaderDiv, .colred .announcementsHeaderDiv, .colred-trans .commentDiv, .colred-trans .studentContentTable, .colred-trans .questionDiv .contentCol {
		background-color: var(--sakai-red-30);
	}
	.colred a[href], .colred h3.author, .colred-trans a[href], .colred-trans h3.author {
		color: var(--sakai-red-80);
	}
	//legacy blue
	.colblue, .colblue-trans {
		@include sakai-colorize(sakai-blue-20, sakai-blue-80);
		border: 1px solid var(--sakai-blue-25);
	}
	.colblue .commentDiv, .colblue .studentContentTable, .colblue .questionDiv .contentCol, .colblue .forumSummaryHeaderDiv, .colblue .announcementsHeaderDiv, .colblue-trans .commentDiv, .colblue-trans .studentContentTable, .colblue-trans .questionDiv .contentCol {
		background-color: var(--sakai-blue-30);
	}
	.colblue a[href], .colblue-trans a[href] {
		color: var(--sakai-blue-80);
	}
	//legacy green
	.colgreen, .colgreen-trans {
		@include sakai-colorize(sakai-green-20, sakai-green-80);
		border: 1px solid var(--sakai-green-25);
	}
	.colgreen .commentDiv, .colgreen .studentContentTable, .colgreen .questionDiv .contentCol, .colgreen .forumSummaryHeaderDiv, .colgreen .announcementsHeaderDiv, .colgreen-trans .commentDiv, .colgreen-trans .studentContentTable, .colgreen-trans .questionDiv .contentCol {
		background-color: var(--sakai-green-30);
	}
	.colgreen a[href], .colgreen-trans a[href] {
		color: var(--sakai-green-80);
	}
	//legacy yellow
	.colyellow, .colyellow-trans {
		@include sakai-colorize(sakai-gold-20, sakai-gold-80);
		border: 1px solid var(--sakai-gold-25);
	}
	.colyellow .commentDiv, .colyellow .studentContentTable, .colyellow .questionDiv .contentCol, .colyellow .forumSummaryHeaderDiv, .colyellow .announcementsHeaderDiv, .colyellow-trans .commentDiv, .colyellow-trans .studentContentTable, .colyellow-trans .questionDiv .contentCol {
		background-color: var(--sakai-gold-30);
	}
	.colyellow a[href],.colyellow h3.author, .colyellow-trans a[href],.colyellow-trans h3.author {
		color: var(--sakai-gold-80);
	}
	.usebutton,
	input[type="submit"].question-submit,
	.linkCell .addStudentContent,
	input[type="submit"].setStudentZero {
		@include sakai_secondary_button();
		&:hover,
		&:focus,
		&:active {
			background-color: var(--sakai-background-color-4);
		}
	}

	
	@mixin sakaiLessonsLayoutColorScheme($color, $lighterOrDarker, $name, $colorPalette:$colorPalette){
	// Color scheme generation in Lessons Layouts
	// Use any color previously defined via defineColorHSL
	// @include sakaiLessonsLayoutColorScheme($color, $lighterOrDarker, $name)
	// @param color
	//      Type: string
	//      expects the same value used to define a color palette in defineColorHSL
	// @param lighterOrDarker
	//      Type: string
	//      expects a string either lighter or darker
	// @param name
	//      Type: string
	//      expects a string which matches the classes the lessons tool will apply to the markup
	// @returns a set of CSS selectors and rules
	// Example usage 
	//      @include sakaiLessonsLayoutColorScheme('--sakai-gray', 'lighter', 'gray');
		$shade1: #{$color}-30;
		$shade2: #{$color}-25;
		$shade3: #{$color}-35;
		$shade4: #{$color}-10;
		@if $lighterOrDarker == 'darker' {
			$shade1: #{$color}-65;
			$shade2: #{$color}-70;
			$shade3: #{$color}-60;
			$shade4: #{$color}-80;
		}
		
		.coln#{$name}, .coln#{$name}-trans {
			background: var(--sakai-background-color-1);
			border: 1px solid var(--$shade1);
		}
		.coln#{$name}-header, .coln#{$name}-trans-header {
			// @debug $shade2 + '  #{$shade2}  ' + map-get($colorPalette,#{$shade2});

			@include sakai-colorize(#{$shade2}, $colorPalette: $colorPalette);
			border: 1px solid var(--#{$shade2});
		}
		.collapsibleSectionHeader.coln#{$name}-header:hover, .collapsibleSectionHeader.coln#{$name}-trans-header:hover {
			@include sakai-colorize(#{$shade1}, $colorPalette: $colorPalette);
			border-color: var(--#{$shade1});
		}
		.collapsibleSectionHeader.coln#{$name}-header:active, .collapsibleSectionHeader.coln#{$name}-trans-header:active {
			@include sakai-colorize(#{$shade3}, $colorPalette: $colorPalette);
			border-color: var(--#{$shade3});
		}
		.coln#{$name}-header + .section {
			border: 1px solid var(--#{$shade2});
			border-top: none;
		}
		
		.coln#{$name} {
			.questionDiv .contentCol, .checklistDiv {
				@include sakai-colorize(#{$shade4}, $colorPalette: $colorPalette);
			}
			input[type="submit"].question-submit,
			.linkCell .addStudentContent,
			input[type="submit"].setStudentZero {
				@include sakai-colorize(#{$shade2}, $colorPalette: $colorPalette);
				border: 1px solid var(--#{$shade2});
				&:hover,
				&:focus {
					@include sakai-colorize(#{$shade1}, $colorPalette: $colorPalette);
					border: 1px solid var(--#{$shade1});
				}
				&:active {
					@include sakai-colorize(#{$shade3}, $colorPalette: $colorPalette);
					border: 1px solid var(--#{$shade3});
				}
			}
			input[type="submit"].question-submit,.linkCell .addStudentContent, input[type="submit"].setStudentZero {
				margin-top: $standard-space-4x;
			}
		}

		.usebutton.n#{$name},
		.usebutton.n#{$name}-trans {
			background-color: var(#{$shade1}) !important;
			color: white !important;
		}
	}

	@include sakaiLessonsLayoutColorScheme('sakai-gray', 'lighter', 'gray');
	@include sakaiLessonsLayoutColorScheme('sakai-gray', 'darker', 'black');
	@include sakaiLessonsLayoutColorScheme('sakai-blue', 'lighter', 'blue');
	@include sakaiLessonsLayoutColorScheme('sakai-blue', 'darker', 'blue2');
	@include sakaiLessonsLayoutColorScheme('sakai-red', 'lighter', 'red');
	@include sakaiLessonsLayoutColorScheme('sakai-green', 'lighter', 'green');
	@include sakaiLessonsLayoutColorScheme('sakai-orange', 'lighter', 'orange');
	@include sakaiLessonsLayoutColorScheme('sakai-gold', 'lighter', 'gold');
	@include sakaiLessonsLayoutColorScheme('sakai-teal', 'lighter', 'teal');
	@include sakaiLessonsLayoutColorScheme('sakai-purple', 'lighter', 'purple');
	@include sakaiLessonsLayoutColorScheme('sakai-navy', 'lighter', 'navy');
	@include sakaiLessonsLayoutColorScheme('sakai-navy', 'darker', 'navy2');
	
	
	.colngray-trans, .colnblack-trans, .colnblue-trans, .colnblue2-trans, .colnred-trans, .colnnavy-trans, .colnnavy2-trans, .colnorange-trans, .colngold-trans, .colnteal-trans, .colnpurple-trans,
	.colgray-trans, .colred-trans, .colblue-trans, .colgreen-trans, .colyellow-trans, .colngreen-trans {
		border-color: transparent;
		box-shadow: none;
		transition: none;
	}

	.colnblue2 .studentContentTable, .colnnavy2 .studentContentTable {
		background: transparent;
	}

	/*these won't touch the dialog menus in lessons if they're in the namespace as dialogs are outside of any tool content on the page. */
	#buttonColorLabel, #subpage-buttonColorLabel {
		margin-left: 20px;

		&.disabled {
			color: var(--sakai-text-color-disabled);
		}
	}

	#btncolor-selection, #subpage-btncolor-selection {
		&.disabled {
			cursor: not-allowed;
			color: var(--sakai-text-color-disabled);
		}
	}

	.force-btn-msg {
		padding-left: 20px;
		font-style: italic;
	}

	.color-select-section {
		padding-top: 10px;
		padding-bottom: 10px;
	}

	#accordion, #accordion2 {
		.accordionBtn{
			color: var(--sakai-text-color-1) !important; /*have to override Sakai button color*/
			background-color: transparent;
			border: none;
			margin: 0px;
			padding: 0px;

			&:focus {
				outline: none !important;
			}

			&:before {
				font-family: "FontAwesome";
				content: "\f0d7";
				color: var(--sakai-text-color-1);
				padding-right: 5px;
			}

			&.collapsed {
				&:before {
					font-family: "FontAwesome";
					content: "\f0da";
					color: var(--sakai-text-color-1);
					padding-right: 5px;
				}
			}
		}

		.dialog-panel{
			margin-top: 10px;

			&.displayPanel{
				margin-top: 0px;
				border-bottom: 1px solid var(--sakai-border-color);
			}
		}

	}
	/* end dialog stuff */

	#content {
			padding-top: 0;
	}
	.portletBody {
		.column {
			border: $lessons-column-border;
			border-color: var(--lessons-column-border-color);
		}
		.mainList {
			div:hover {
				&.canEdit {
					background-color: var(--lessons-item-hover-background);
					box-shadow: var(--lessons-item-hover-shadow);
				}
			}
			.canEdit {
				border-top: $lessons-item-border-top;
				border-right: $lessons-item-border-right;
				border-bottom: $lessons-item-border-bottom;
				border-left: $lessons-item-border-left;
				border-color: var(--lessons-item-border-top-color);
			}
			div.item,
			div.textType,
			div.multimediaType,
			div.checklistType {
				margin:0;
				padding: calc(#{$standard-spacing} / 2) 0;
			}
			div.item:hover,
			div.item:focus,
			div.item:active {
				.edit-col {
					display: $lessons-item-edit-hover-display;
				}	
			}
			.edit-col {
				display: $lessons-item-edit-display;
			}
		}
	}
	.topaction {
		position: absolute;
		top: 0;
		right: 0;
		
		@media #{$phone} {
			top: 2em;	
		}	
	}
	button.section-merge-link, button.column-merge-link {
		padding: 0;
		margin: 0;
		line-height: 24px;
		border: 0;
		background: transparent;
	}
}

.#{$namespace}multipleTools {
	.#{$namespace}sakai-lessonbuildertool {
		.#{$namespace}toolTitleNav {
			float: none;
			margin-top: 0;
		}
	}
}

// Lessons tool calendar event pop-up.
div#calendarEventDialog {
	label {
		display: inline-block;
		width: 30%;
	}
	
	span#event-type {
		padding-left: 10px;
	}
	
	#event-description p {
		display: inline-block;
	}

	#event-attachments {
		display: inline-block;
	}

	.eventAttachmentList {
		list-style-type: none;
		padding-left: 0;
		.eventAttachmentFilename {
			padding-left: 10px;
		}
	}
}
