## login component

#if (!${loginTopLogin})

<nav class="navbar-nav">
    <ul class="list-group list-group-horizontal fs-2">
        <li class="list-group-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-question-circle" viewBox="0 0 16 16">
                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
            </svg>
        </li>
        <li class="list-group-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-circle" viewBox="0 0 16 16">
                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
            </svg>
        </li>
        <li class="list-group-item">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bell" viewBox="0 0 16 16">
                <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"/>
            </svg>
        </li>
        <li class="list-group-item"><button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample" aria-controls="offcanvasExample">${loginUserFirstName}</button></li>
    </ul>
</nav>

<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
    <div class="offcanvas-header">
        <h2 class="offcanvas-title" id="offcanvasExampleLabel">${loginUserDispName} (${loginUserDispId})</h2>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>

    <div class="offcanvas-body">
        <ul class="nav flex-column">
            <li class="nav-item"><a href="#" class="nav-link">Calendar</a></li>
            <li class="nav-item"><a href="#" class="nav-link">Preferences</a></li>
            <li class="nav-item"><a href="#" class="nav-link">Tutorial</a></li>
            <li class="nav-item">
                <a href="${loginLogInOutUrl}" title="${loginMessage}" id="loginLink1" class="Mrphs-loginUser__message nav-link" data-warning="${logoutWarningMessage}"><span class="Mrphs-login-Message">${loginMessage}</span></a>
            </li>
        </ul>
    </div>
</div>

<nav id="mastLogin" class="Mrphs-loginNav d-none" aria-label="${rloader.sit_subnavigation}">

        #if (${userIsLoggedIn})

            #if (${usePortalSearch})
            <sakai-search page-size="${portalSearchPageSize}"></sakai-search>
            #end

            #if ($viewAsStudentLink)
                #parse("/vm/trinity/snippets/roleSwitch-snippet.vm")
            #end ## END of IF ($viewAsStudentLink)

            #if (${useBullhornAlerts})
            <div class="Mrphs-sitesNav__menuitem portal-bullhorns-buttons">
                <a id="Mrphs-bullhorn" href="javascript:void(0);" title="${rloader.sit_academic_bullhorn_title}" aria-haspopup="true" aria-expanded="false">
                    <span class="icon-sakai--alerts"></span>
                </a>
            </div>
            #end
        #end

        #if ($quickLinks)
            <ul id="quickLinks" class="Mrphs-quickLinksNav">
                <li class="Mrphs-quickLinksNav__popup">
                    <a href="javascript:void(0);" class="js-toggle-quick-links-nav" title="${rloader.sit_quick_links_title}" aria-haspopup="true">
                        <i class="fa fa-th fa-external-link-square" aria-hidden="true"></i><span class="quicklinks-label">${rloader.sit_quick_links}</span>
                    </a>

                    <ul class="Mrphs-quickLinksNav__subnav is-hidden" role="menu">
                        <li id="quickLinks-header" class="Mrphs-quickLinksNav__submenuitem">
                            <span class="Mrphs-quickLinks-header--info">${quickLinksInfo}</span>
                            <a id="quickLinks-close" href="javascript:void(0);">
                                <span class="fa fa-times" aria-hidden="true"></span>
                            </a>
                        </li>
                        <div id="selectQuickLink">
                            <div class="tab-box">
                                #foreach($quickLink in $quickLinks)
                                    <li class="Mrphs-quickLinksNav__submenuitem">
                                        <a href="${quickLink.url}" title="$quickLink.title" target="_blank">
                                            #if(${quickLink.iconType} == "image")
                                                <span id="quicklink-icon" style="background-image:url(${quickLink.imageURI})"></span>
                                            #elseif (${quickLink.iconType} == "icon")
                                                <span id="quicklink-icon" class="${quickLink.iconClass}"></span>
                                            #end
                                            <span class="Mrphs-quickLinks__submenuitem--title">${quickLink.name}</span>
                                        </a>
                                    </li>
                                #end
                            </div>
                        </div>
                    </ul>
                </li>
            </ul>
        #end

        #if (${userIsLoggedIn})
            <div class="Mrphs-sitesNav__menuitem view-all-sites-btn">
                <a href="javascript:void(0);" id="viewAllSites" title="${rloader.sit_allsites}" aria-haspopup="true" aria-expanded="false">
                    <i class="fa fa-th all-sites-icon" aria-hidden="true"></i> <span class="all-sites-label">${rloader.sit_worksites}</span>
                </a>
            </div>
        #end

        <ul id="loginLinks" class="Mrphs-userNav">

                #foreach ( $site in $tabsSites.tabsSites )

                    #if (${site.isMyWorkspace})

                        <li class="Mrphs-userNav__popup js-toggle-user-nav">

                                #if (${displayUserloginInfo})

                                    #if (${tabsSites.mrphs_profileToolUrl})

                                        ## https://www.w3.org/WAI/tutorials/menus/flyout/
                                        ## https://www.smashingmagazine.com/2017/11/building-accessible-menu-systems/
                                        ## https://accessibility.oit.ncsu.edu/it-accessibility-at-nc-state/developers/accessibility-handbook/mouse-and-keyboard-events/links/link-behavior/
                                        <div id="loginUser" class="has-avatar Mrphs-userNav__submenuitem--userlink #if (${site.isCurrentSite}) current-site #end">
                                            <a href="javascript:void(0);"
						title="${loginUserFirstName} ${rloader.sit_profile_drop_down}"
						aria-haspopup="true" aria-expanded="false" class="Mrphs-userNav__drop-btn Mrphs-userNav__submenuitem--username">
                                                <span class="Mrphs-userNav__submenuitem--profilepicture" style="background-image:url(/direct/profile/${loginUserId}/image/thumb)"></span>
                                                <span class="textlink">${loginUserFirstName}</span>
                                            </a>
                                        </div>

                                    #else

                                        <a id="loginUser" href="javascript:void(0);"
					title="${loginUserFirstName} ${rloader.sit_profile_drop_down}"
					aria-haspopup="true" aria-expanded="false"
					class="Mrphs-userNav__drop-btn no-avatar Mrphs-userNav__submenuitem--userlink #if (${site.isCurrentSite}) current-site #end">
                                            <span class="Mrphs-userNav__submenuitem--username">${loginUserFirstName}</span>
                                            <span class="Mrphs-userNav__submenuitem--userid">${loginUserDispId}</span>
                                        </a>

                                    #end ## END of IF (${tabsSites.mrphs_profileToolUrl})

                                #end ## END of IF (${displayUserloginInfo})

                            <ul class="Mrphs-userNav__subnav is-hidden">

                                <li class="Mrphs-userNav__submenuitem Mrphs-userData">
                                    <div class="Mrphs-userNav__submenuitem--profile-and-image">
                                        #if (${tabsSites.mrphs_profileToolUrl})
                                            <div class="has-avatar">
                                                <a class="Mrphs-userNav__submenuitem--profilelink" href="${tabsSites.mrphs_profileToolUrl}" aria-haspopup="dialog">
                                                    <span class="Mrphs-userNav__submenuitem--profilepicture Mrphs-userNav__pic-changer" style="background-image:url(/direct/profile/${loginUserId}/image/thumb)"></span>
                                                    <span class="sr-only">${rloader.pic_changer_title}</span>
                                                </a>
                                            </div>
                                            <div class="Mrphs-userNav__submenuitem--profile">
                                                <a href="${tabsSites.mrphs_profileToolUrl}">
                                                    <span>${rloader.sit_profile}</span>
                                                </a>
                                            </div>
                                        #end
                                    </div>
                                    <div class="Mrphs-userNav__submenuitem--fullname-and-id">
                                        <div class="Mrphs-userNav__submenuitem--fullname">
                                            ${loginUserDispName}
                                        </div>
                                        <div class="Mrphs-userNav__submenuitem--displayid">
                                            ${loginUserDispId}
                                        </div>
                                    </div>
                                </li>

                                <li class="Mrphs-userNav__submenuitem Mrphs-userNav__submenuitem-indented">
                                    <a href="javascript:;" id="Mrphs-userNav__submenuitem--connections" aria-haspopup="dialog">
                                        <span>${rloader.sit_connections}</span>
                                    </a>
                                </li>

                                    #if (${tabsSites.calendarToolUrl})
            
                                        <li class="Mrphs-userNav__submenuitem Mrphs-userNav__submenuitem-indented">
                                            <a href="${tabsSites.calendarToolUrl}" class="Mrphs-userNav__submenuitem--calendar">
                                                <span>${rloader.sit_calendar}</span>
                                            </a>
                                        </li>
            
                                    #end ## END of IF (${tabsSites.calendarToolUrl})

                                    #if (${tabsSites.prefsToolUrl})

                                        <li class="Mrphs-userNav__submenuitem Mrphs-userNav__submenuitem-indented">
                                            <a href="${tabsSites.prefsToolUrl}" class="Mrphs-userNav__submenuitem--prefs">
                                                <span>${rloader.sit_preferences}</span>
                                            </a>
                                        </li>

                                    #end ## END of IF (${tabsSites.prefsToolUrl})

                                    #if (${tabsSites.tutorial})

                                        <li class="Mrphs-userNav__submenuitem Mrphs-userNav__submenuitem-indented">
                                            <a id="tutorialLink" href="#" onclick="startTutorial({});" class="Mrphs-userNav__submenuitem--tutorial" aria-haspopup="dialog">
                                                <span>${rloader.sit_tutorial}</span>
                                            </a>
                                        </li>

                                    #end ## END of IF (${tabsSites.tutorial})

                                    #if (${sakaiThemesEnabled} && ${themeSwitcher})

                                        <li class="Mrphs-userNav__submenuitem Mrphs-userNav__submenuitem-indented Mrphs-userNav__submenuitem-toggle">
                                            <label for="sakai-darkThemeSwitcher" class="sakaiThemeSwitch">${rloader.sit_themeSwitcher}</label>
                                            <button role="switch" aria-checked="false"
                                                id="sakai-darkThemeSwitcher" class="Mrphs-userNav__submenuitem--themeSwitcher switch">
                                                <span>${rloader.sit_themeSwitcherOff}</span>
                                                <span>${rloader.sit_themeSwitcherOn}</span>
                                            </button>
                                        </li>

                                    #end ## END of IF (${sakaiThemesEnabled} && ${themeSwitcher})

                            #end ## END of IF (${site.isMyWorkspace})

                        #end ## END of FOREACH ( $site in $tabsSites.tabsSites )

                            <li class="Mrphs-userNav__logout Mrphs-userNav__submenuitem-indented">
                                #parse("/vm/trinity/snippets/loginImage-snippet.vm")
                            </li>

                        </ul>

            </li>

        </ul> <!-- end of nav#loginLinks-->

        ## parse("/vm/trinity/snippets/loginImage-snippet.vm")
    </nav>
#else ## ELSE of IF (!${loginTopLogin})

    <nav id="mastLogin" class="Mrphs-loginNav" aria-label="${rloader.sit_subnavigation}">
        #parse("/vm/trinity/snippets/loginForm-snippet.vm")
    </nav>
#end ## END of IF (!${loginTopLogin})
